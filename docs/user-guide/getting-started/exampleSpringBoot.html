<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user-guide/getting-started/exampleSpringBoot" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.0">
<title data-rh="true">Example Spring Boot | Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kadai-io.github.io/kadai-doc/docs/user-guide/getting-started/exampleSpringBoot"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Example Spring Boot | Documentation"><meta data-rh="true" name="description" content="In the first 4 steps, we will set up KADAI REST API without security. Then, we will show how to use"><meta data-rh="true" property="og:description" content="In the first 4 steps, we will set up KADAI REST API without security. Then, we will show how to use"><link data-rh="true" rel="icon" href="/kadai-doc/img/empty-logo.png"><link data-rh="true" rel="canonical" href="https://kadai-io.github.io/kadai-doc/docs/user-guide/getting-started/exampleSpringBoot"><link data-rh="true" rel="alternate" href="https://kadai-io.github.io/kadai-doc/docs/user-guide/getting-started/exampleSpringBoot" hreflang="en"><link data-rh="true" rel="alternate" href="https://kadai-io.github.io/kadai-doc/docs/user-guide/getting-started/exampleSpringBoot" hreflang="x-default"><script src="https://cdn.jsdelivr.net/npm/docusaurus-plugin-drawio/viewer.min.js"></script><link rel="stylesheet" href="/kadai-doc/assets/css/styles.6d73179a.css">
<script src="/kadai-doc/assets/js/runtime~main.d7e440f2.js" defer="defer"></script>
<script src="/kadai-doc/assets/js/main.c4f04fad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kadai-doc/"><div class="navbar__logo"><img src="/kadai-doc/img/empty-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/kadai-doc/img/empty-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">KADAI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kadai-doc/docs/user-guide/userGuideIntro">User Guide</a><a class="navbar__item navbar__link" href="/kadai-doc/docs/contact-us/contactUs">Contact Us</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kadai-io/kadai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://kadai-io.azurewebsites.net/kadai/swagger-ui/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">REST API Doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://kadai-io.azurewebsites.net/kadai/docs/java/kadai-core/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">KADAI core Java Doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kadai-doc/docs/demo-app/demoApp">Demo App</a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/kadai-doc/"><img src="/kadai-doc/img/empty-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/kadai-doc/img/empty-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>KADAI</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kadai-doc/docs/user-guide/userGuideIntro">User Guide Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/kadai-doc/docs/category/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kadai-doc/docs/user-guide/getting-started/exampleSpringBoot">Example Spring Boot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kadai-doc/docs/user-guide/getting-started/supportedEnvironments">Supported Environments</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kadai-doc/docs/category/core-concepts">Core Concepts</a><button aria-label="Expand sidebar category &#x27;Core Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kadai-doc/docs/category/configuration">Configuration</a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kadai-doc/docs/category/features">Features</a><button aria-label="Expand sidebar category &#x27;Features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kadai-doc/docs/category/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kadai-doc/docs/category/adapter">Adapter</a><button aria-label="Expand sidebar category &#x27;Adapter&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kadai-doc/docs/demo-app/demoApp">Demo App</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kadai-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kadai-doc/docs/category/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Example Spring Boot</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Example Spring Boot</h1></header>
<p>In the first 4 steps, we will set up KADAI REST API without security. Then, we will show how to use
the resulting REST API with <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a>. This guide then sets up security.
At the end of the guide, we will add the UI.</p>
<!-- -->
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-youll-need">What you&#x27;ll need<a href="#what-youll-need" class="hash-link" aria-label="Direct link to What you&#x27;ll need" title="Direct link to What you&#x27;ll need">​</a></h2>
<p>To set up the example, please install:</p>
<ul>
<li>an IDE of your choice (preferably IntelliJ)</li>
<li>Java 17</li>
<li>maven</li>
<li>optional: <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a> (makes REST API requests easier)</li>
</ul>
<p>Note: Please name your packages, folders, and files exactly like in the example!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-up-kadai-rest-api-without-security">Set up KADAI REST-API without security<a href="#set-up-kadai-rest-api-without-security" class="hash-link" aria-label="Direct link to Set up KADAI REST-API without security" title="Direct link to Set up KADAI REST-API without security">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-1-initialize-an-empty-project">Step 1: Initialize an empty project<a href="#step-1-initialize-an-empty-project" class="hash-link" aria-label="Direct link to Step 1: Initialize an empty project" title="Direct link to Step 1: Initialize an empty project">​</a></h3>
<p>Go to <a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Spring Initializer</a> and create an example Maven Project. Choose the
same options as in the Screenshot, except the spring version. Please check Java 17, then click on &quot;Generate&quot;.</p>
<p><img decoding="async" loading="lazy" alt="empty spring boot project" src="/kadai-doc/assets/images/project-initializer-36766e23926e9de9544f809c236ec969.png" width="1908" height="1061" class="img_ev3q"></p>
<p>Unpack the project in the folder of your choice and open it in IntelliJ</p>
<p><img decoding="async" loading="lazy" alt="unpacked project" src="/kadai-doc/assets/images/schritt-2-471abd42fb0e963330579ad3675bd6a5.png" width="1725" height="775" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-2-add-dependencies">Step 2: Add dependencies<a href="#step-2-add-dependencies" class="hash-link" aria-label="Direct link to Step 2: Add dependencies" title="Direct link to Step 2: Add dependencies">​</a></h3>
<p>Please add the following dependencies to the pom.
All dependencies can be copied as one block at the end
of step 2.
After adding the dependencies, please reload maven and recompile the project.</p>
<p>** 1. spring core dependency: **</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.plugin&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-plugin-core&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;3.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>** 2. database dependencies: **</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.h2database&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;h2&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>** 3. kadai dependencies: **</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;io.kadai&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;kadai-common-data&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;9.1.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;io.kadai&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;kadai-common-logging&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;9.1.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;io.kadai&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;kadai-rest-spring&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;9.1.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>** 4. tomcat application server dependency: **</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>** All dependencies **</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.plugin&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-plugin-core&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;3.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;io.kadai&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;kadai-common-logging&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;9.1.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;io.kadai&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;kadai-rest-spring&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;9.1.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;io.kadai&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;kadai-common-data&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;9.1.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.h2database&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;h2&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-3-add-properties-configuration">Step 3: Add properties configuration<a href="#step-3-add-properties-configuration" class="hash-link" aria-label="Direct link to Step 3: Add properties configuration" title="Direct link to Step 3: Add properties configuration">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-3a-fill-out-applicationproperties">Step 3a: Fill out application.properties<a href="#step-3a-fill-out-applicationproperties" class="hash-link" aria-label="Direct link to Step 3a: Fill out application.properties" title="Direct link to Step 3a: Fill out application.properties">​</a></h4>
<p>The example already has the configuration file <code>application.properties</code> in
the <code>src/main/resources</code> folder.
It&#x27;s a standard configuration file used by spring.
You can read
more about spring configuration in
the <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html" target="_blank" rel="noopener noreferrer">spring documentation</a>.
You need to add the following content into that file:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">logging.level.io.kadai=INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging.level.org.springframework=INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.servlet.context-path=/kadai</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.routing.dmn.upload.path=/tmp/routing.dmn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">######## Kadai DB #######</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">######## h2 configuration ########</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=jdbc:h2:mem:kadai;NON_KEYWORDS=KEY,VALUE;IGNORECASE=TRUE;DB_CLOSE_ON_EXIT=FALSE;LOCK_MODE=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.driverClassName=org.h2.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.username=sa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.password=sa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.schemaName=KADAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">######## h2 console configuration ########</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.h2.console.enabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.h2.console.path=/h2-console</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">######## db2 configuration ########</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.driverClassName=com.ibm.db2.jcc.DB2Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.url=jdbc:db2://localhost:5101/tskdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.username=db2inst1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.password=db2inst1-pwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">######## Postgres configuration ########</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.url=jdbc:postgresql://localhost:5102/postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.driverClassName=org.postgresql.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.username=postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.datasource.password=postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.jpa.generate-ddl=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">########spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">####### property that control rest api security deploy use true for no security.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devMode=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This property enables the support of XSRF tokens. This will not work together with devMode.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enableCsrf=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">####### property that control if the database is cleaned and sample data is generated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">generateSampleData=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">####### cache static resources properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.web.resources.cache.cachecontrol.cache-private=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">####### for upload of big workbasket- or classification-files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.servlet.multipart.max-file-size=10MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.servlet.multipart.max-request-size=10MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">####### serve compressed files for faster UI loading times</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.compression.enabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css,image/svg+xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.compression.min-response-size=10240</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.main.allow-bean-definition-overriding=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.tomcat.max-http-form-post-size=-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.tomcat.max-save-post-size=-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.tomcat.max-swallow-size=-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">####### tomcat is not detecting the x-forward headers from bluemix as a trustworthy proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.tomcat.remoteip.internal-proxies=.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.forward-headers-strategy=native</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">####### Properties for AccessIdController to connect to LDAP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.serverUrl=ldap://localhost:10389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.bindDn=uid=admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.bindPassword=secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.baseDn=ou=Test,O=KADAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userSearchBase=cn=users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userSearchFilterName=objectclass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userSearchFilterValue=person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userFirstnameAttribute=givenName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userLastnameAttribute=sn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userFullnameAttribute=cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userPhoneAttribute=phoneNumber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userMobilePhoneAttribute=mobileNumber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userEmailAttribute=email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userOrglevel1Attribute=orgLevel1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userOrglevel2Attribute=orgLevel2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userOrglevel3Attribute=someDepartement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userOrglevel4Attribute=orgLevel4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userIdAttribute=uid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userMemberOfGroupAttribute=memberOf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.userPermissionsAttribute=permission</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.groupSearchBase=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.groupSearchFilterName=objectclass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.groupSearchFilterValue=groupofuniquenames</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.groupNameAttribute=cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.minSearchForLength=3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.maxNumberOfReturnedAccessIds=50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.ldap.groupsOfUser=uniquemember</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Embedded Spring LDAP server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.ldap.embedded.base-dn=OU=Test,O=KADAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.ldap.embedded.credential.username=uid=admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.ldap.embedded.credential.password=secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.ldap.embedded.ldif=classpath:example-users.ldif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.ldap.embedded.port=10389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.ldap.embedded.validation.enabled=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-3b-add-kadaiproperties">Step 3b: Add kadai.properties<a href="#step-3b-add-kadaiproperties" class="hash-link" aria-label="Direct link to Step 3b: Add kadai.properties" title="Direct link to Step 3b: Add kadai.properties">​</a></h4>
<p>Create <code>kadai.properties</code> in the &quot;resources&quot; folder.
This file contains KADAI specific
configuration, like custom holidays, etc.
Please
copy the following content into <code>kadai.properties</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kadai.roles.user=cn=ksc-users,cn=groups,OU=Test,O=KADAI | teamlead-1 | teamlead-2 | user-1-1 | user-1-2 | user-2-1 | user-2-2 | user-b-1 | user-b-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.roles.admin=admin | uid=admin,cn=users,OU=Test,O=KADAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.roles.business_admin=businessadmin | cn=business-admins,cn=groups,OU=Test,O=KADAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.roles.monitor=monitor | cn=monitor-users,cn=groups,OU=Test,O=KADAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.roles.task_admin=taskadmin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.domains=DOMAIN_A|DOMAIN_B|DOMAIN_C|DOMAIN_TEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.user.minimalPermissionsToAssignDomains=READ | OPEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.classification.types=TASK|DOCUMENT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.classification.categories.task=EXTERNAL| manual| autoMAtic| Process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.classification.categories.document=EXTERNAL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.maxRetries=3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.batchSize=50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.runEvery=P1D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.firstRunAt=2018-07-25T08:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.cleanup.task.minimumAge=P14D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.cleanup.history.simple.batchSize=50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.history.cleanup.firstRunAt=2018-07-25T08:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.cleanup.history.simple.minimumAge=P14D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.history.cleanup.runEvery=P1D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.refresh.user.runEvery=P1D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.refresh.user.firstRunAt=2018-07-25T23:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.workingTime.holidays.german.enabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.workingTime.holidays.german.corpus-christi.enabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.history.logger.name=AUDIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.routing.dmn=/dmn-table.dmn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable or disable the jobscheduler at all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># set it to false and no jobs are running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.scheduler.enabled=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># wait time before the first job run in millis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.scheduler.initialStartDelay=100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sleeping time befor the next job runs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.scheduler.period=12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># timeunit for the sleeping period</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Possible values: MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.scheduler.periodTimeUnit=HOURS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.cleanup.task.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.priority.task.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.cleanup.workbasket.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.refresh.user.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kadai.jobs.cleanup.history.simple.enable=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-4-add-rest-configuration">Step 4: Add rest configuration<a href="#step-4-add-rest-configuration" class="hash-link" aria-label="Direct link to Step 4: Add rest configuration" title="Direct link to Step 4: Add rest configuration">​</a></h3>
<p>First, Add <code>@ComponentScan({&quot;io.kadai&quot;,&quot;com.example&quot;})</code> as annotation above the class
definition of the ExampleApplication and a corresponding import to this class. This will allow the
application to find the necessary components.</p>
<p>Then, create a java class with the name <code>ExampleRestConfiguration</code> in the com.example.demo
package. This class defines the Beans and their dependencies. Your project structure should look
like this:</p>
<p><img decoding="async" loading="lazy" alt="basic project" src="/kadai-doc/assets/images/rest-api-project-a58e3752764d48e32eedd577c97f099a.png" width="344" height="601" class="img_ev3q"></p>
<p>Copy following content into <code>ExampleRestConfiguration.java</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.sql.SQLException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import javax.sql.DataSource;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.h2.tools.Server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.beans.factory.annotation.Value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.DependsOn;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.transaction.PlatformTransactionManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.kadai.KadaiConfiguration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.kadai.common.api.KadaiEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.kadai.common.internal.configuration.DbSchemaCreator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.kadai.sampledata.SampleDataGenerator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExampleRestConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public PlatformTransactionManager txManager(DataSource dataSource) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new DataSourceTransactionManager(dataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @DependsOn(&quot;kadaiConfiguration&quot;) // generate sample data after schema was inserted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SampleDataGenerator generateSampleData(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      KadaiConfiguration kadaiConfiguration,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      DataSource dataSource,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${generateSampleData:true}&quot;) boolean generateSampleData)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      throws SQLException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DbSchemaCreator dbSchemaCreator =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new DbSchemaCreator(dataSource, kadaiConfiguration.getSchemaName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbSchemaCreator.run();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SampleDataGenerator sampleDataGenerator =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new SampleDataGenerator(dataSource, kadaiConfiguration.getSchemaName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (generateSampleData) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sampleDataGenerator.generateSampleData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sampleDataGenerator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @DependsOn(&quot;generateSampleData&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public KadaiEngine getKadaiEngine(KadaiConfiguration kadaiConfiguration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      throws SQLException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return KadaiEngine.buildKadaiEngine(kadaiConfiguration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // only required to let the adapter example connect to the same database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean(initMethod = &quot;start&quot;, destroyMethod = &quot;stop&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Server inMemoryH2DatabaseaServer() throws SQLException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Server.createTcpServer(&quot;-tcp&quot;, &quot;-tcpAllowOthers&quot;, &quot;-tcpPort&quot;, &quot;9095&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @ConditionalOnMissingBean(KadaiConfiguration.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public KadaiConfiguration kadaiConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      DataSource dataSource,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Qualifier(&quot;kadaiPropertiesFileName&quot;) String propertiesFileName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Qualifier(&quot;kadaiPropertiesDelimiter&quot;) String delimiter) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new KadaiConfiguration.Builder(dataSource, true, &quot;KADAI&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .initKadaiProperties(propertiesFileName, delimiter)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-5-try-out-the-rest-api">Step 5: Try out the REST-API<a href="#step-5-try-out-the-rest-api" class="hash-link" aria-label="Direct link to Step 5: Try out the REST-API" title="Direct link to Step 5: Try out the REST-API">​</a></h3>
<p>Recompile the project and then start the DemoApplication in your IDE. You can now make the following
request:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET http://localhost:8080/kadai/api/v1/classifications</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should get a list of different Classifications in the body of the response. Here is a screenshot
of the request and the response in <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a>:</p>
<p><img decoding="async" loading="lazy" alt="example request" src="/kadai-doc/assets/images/example-request-classifications-0eca365b18b2aa2f059fa8cd18718b86.png" width="1410" height="925" class="img_ev3q"></p>
<p>You can also request Tasks using the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET http://localhost:8080/kadai/api/v1/tasks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>At this point, full KADAI REST-API functionality is available without security or authorization.
They will be added in the next steps.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-up-kadai-security">Set up KADAI Security<a href="#set-up-kadai-security" class="hash-link" aria-label="Direct link to Set up KADAI Security" title="Direct link to Set up KADAI Security">​</a></h2>
<p>Our example application uses <a href="https://ldap.com/learn-about-ldap/" target="_blank" rel="noopener noreferrer">ldap</a> for its authorization.
First, add a <code>security</code> package into the <code>com.example.demo</code> package (in
src/main/java/com/example/demo). The package will consist of one configurer class:
BootWebSecurityConfigurer (will be replaced), and one example configuration
ExampleWebSecurityConfig. The classes will be created in the next steps.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-6-add-security-dependencies-and-stop-disabling-security">Step 6: Add security dependencies and stop disabling security<a href="#step-6-add-security-dependencies-and-stop-disabling-security" class="hash-link" aria-label="Direct link to Step 6: Add security dependencies and stop disabling security" title="Direct link to Step 6: Add security dependencies and stop disabling security">​</a></h3>
<p>Add the following dependencies to your pom and reload maven:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.ldap&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-ldap-core&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-security-ldap&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.unboundid&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;unboundid-ldapsdk&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, set the <code>devMode</code> property in <code>application.properties</code> to false. This enables
authorization checks.
You also need to remove the following lines from the <code>ExampleRestConfiguration.java</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConditionalOnMissingBean(KadaiConfiguration.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public KadaiConfiguration kadaiConfiguration(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataSource dataSource,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Qualifier(&quot;kadaiPropertiesFileName&quot;) String propertiesFileName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Qualifier(&quot;kadaiPropertiesDelimiter&quot;) String delimiter) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new KadaiConfiguration.Builder(dataSource, true, &quot;KADAI&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .initKadaiProperties(propertiesFileName, delimiter)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This way, you don&#x27;t disable security manually.
Deleted because KadaiEngineConfiguration doesn&#x27;t exist anymore</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-7-add-bootwebsecurityconfigurerjava">Step 7: Add BootWebSecurityConfigurer.java<a href="#step-7-add-bootwebsecurityconfigurerjava" class="hash-link" aria-label="Direct link to Step 7: Add BootWebSecurityConfigurer.java" title="Direct link to Step 7: Add BootWebSecurityConfigurer.java">​</a></h3>
<p>Create <code>BootWebSecurityConfigurer.java</code> in the security folder
and copy the following content into
it:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo.security;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.function.Function;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.beans.factory.annotation.Value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Primary;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.http.HttpMethod;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.ldap.core.support.BaseLdapPathContextSource;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.authentication.AuthenticationManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.config.Customizer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.config.annotation.web.configurers.HeadersConfigurer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.config.annotation.web.configurers.RequestCacheConfigurer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.config.ldap.LdapPasswordComparisonAuthenticationManagerFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.core.GrantedAuthority;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.core.authority.mapping.GrantedAuthoritiesMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.crypto.password.NoOpPasswordEncoder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.ldap.DefaultSpringSecurityContextSource;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.ldap.userdetails.LdapAuthoritiesPopulator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.SecurityFilterChain;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.csrf.CookieCsrfTokenRepository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.jaasapi.JaasApiIntegrationFilter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.util.matcher.AntPathRequestMatcher;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.kadai.common.rest.SpringSecurityToJaasFilter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** Default basic configuration for kadai web example. */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class BootWebSecurityConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final String ldapServerUrl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final String ldapBaseDn;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final String ldapUserDnPatterns;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final String ldapGroupSearchBase;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final String ldapGroupSearchFilter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final boolean devMode;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final boolean enableCsrf;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public BootWebSecurityConfigurer(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${kadai.ldap.serverUrl:ldap://localhost:10389}&quot;) String ldapServerUrl,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${kadai.ldap.baseDn:OU=Test,O=KADAI}&quot;) String ldapBaseDn,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${kadai.ldap.userDnPatterns:uid={0},cn=users}&quot;) String ldapUserDnPatterns,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${kadai.ldap.groupSearchBase:cn=groups}&quot;) String ldapGroupSearchBase,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${kadai.ldap.groupSearchFilter:uniqueMember={0}}&quot;) String ldapGroupSearchFilter,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${enableCsrf:false}&quot;) boolean enableCsrf,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Value(&quot;${devMode:false}&quot;) boolean devMode) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.enableCsrf = enableCsrf;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.ldapServerUrl = ldapServerUrl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.ldapBaseDn = ldapBaseDn;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.ldapGroupSearchBase = ldapGroupSearchBase;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.ldapGroupSearchFilter = ldapGroupSearchFilter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.ldapUserDnPatterns = ldapUserDnPatterns;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.devMode = devMode;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http.authorizeHttpRequests(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            authorizeHttpRequests -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                authorizeHttpRequests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .requestMatchers(&quot;/css/**&quot;, &quot;/img/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .permitAll()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .requestMatchers(HttpMethod.GET, &quot;/docs/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .permitAll())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .cors(Customizer.withDefaults())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addFilter(jaasApiIntegrationFilter())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addFilterAfter(new SpringSecurityToJaasFilter(), JaasApiIntegrationFilter.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (enableCsrf) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      CookieCsrfTokenRepository csrfTokenRepository = CookieCsrfTokenRepository.withHttpOnlyFalse();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      csrfTokenRepository.setCookiePath(&quot;/&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      http.csrf(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              csrf -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  csrf.csrfTokenRepository(csrfTokenRepository)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      .csrfTokenRequestHandler(new SpaCsrfTokenRequestHandler()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .addFilterAfter(new CsrfCookieFilter(), SpringSecurityToJaasFilter.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      http.csrf(AbstractHttpConfigurer::disable).httpBasic(Customizer.withDefaults());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (devMode) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      http.headers(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              headers -&gt; headers.frameOptions(HeadersConfigurer.FrameOptionsConfig::sameOrigin))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .authorizeHttpRequests(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              authorizeHttpRequests -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  authorizeHttpRequests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      .requestMatchers(&quot;/h2-console/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      .permitAll()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      .anyRequest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      .fullyAuthenticated())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .logout(logout -&gt; logout.logoutSuccessUrl(&quot;http://localhost:4200/#&quot;).permitAll());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      addLoginPageConfiguration(http);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http.requestCache(RequestCacheConfigurer::disable);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return http.build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected void addLoginPageConfiguration(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http.authorizeHttpRequests(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            authorizeHttpRequests -&gt; authorizeHttpRequests.anyRequest().fullyAuthenticated())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .formLogin(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            formLogin -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                formLogin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .loginPage(&quot;/login&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .failureUrl(&quot;/login?error&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .defaultSuccessUrl(&quot;/index.html&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .permitAll())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .logout(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            logout -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                logout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .invalidateHttpSession(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .clearAuthentication(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .logoutSuccessUrl(&quot;/login?logout&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .deleteCookies(&quot;JSESSIONID&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .permitAll());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public LdapAuthoritiesPopulator authoritiesPopulator(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      DefaultSpringSecurityContextSource contextSource) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Function&lt;Map&lt;String, List&lt;String&gt;&gt;, GrantedAuthority&gt; authorityMapper =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        recordVar -&gt; new SimpleGrantedAuthority(recordVar.get(&quot;spring.security.ldap.dn&quot;).get(0));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DefaultLdapAuthoritiesPopulator populator =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new DefaultLdapAuthoritiesPopulator(contextSource, ldapGroupSearchBase);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    populator.setGroupSearchFilter(ldapGroupSearchFilter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    populator.setSearchSubtree(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    populator.setRolePrefix(&quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    populator.setAuthorityMapper(authorityMapper);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return populator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public DefaultSpringSecurityContextSource defaultSpringSecurityContextSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new DefaultSpringSecurityContextSource(ldapServerUrl + &quot;/&quot; + ldapBaseDn);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public GrantedAuthoritiesMapper grantedAuthoritiesMapper() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SimpleAuthorityMapper grantedAuthoritiesMapper = new SimpleAuthorityMapper();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grantedAuthoritiesMapper.setPrefix(&quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return grantedAuthoritiesMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected JaasApiIntegrationFilter jaasApiIntegrationFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JaasApiIntegrationFilter filter = new JaasApiIntegrationFilter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter.setCreateEmptySubject(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return filter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AuthenticationManager ldapAuthenticationManager(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      BaseLdapPathContextSource contextSource, LdapAuthoritiesPopulator authorities) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @SuppressWarnings(&quot;deprecation&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LdapPasswordComparisonAuthenticationManagerFactory factory =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new LdapPasswordComparisonAuthenticationManagerFactory(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            contextSource, NoOpPasswordEncoder.getInstance());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    factory.setUserDnPatterns(ldapUserDnPatterns);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    factory.setLdapAuthoritiesPopulator(authorities);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    factory.setAuthoritiesMapper(grantedAuthoritiesMapper());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    factory.setPasswordAttribute(&quot;userPassword&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return factory.createAuthenticationManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Create <code>CsrfCookieFilter.java</code> in the security folder and copy the following content into it:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo.security;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import jakarta.servlet.FilterChain;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import jakarta.servlet.ServletException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import jakarta.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import jakarta.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.csrf.CsrfToken;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.filter.OncePerRequestFilter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">final class CsrfCookieFilter extends OncePerRequestFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected void doFilterInternal(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpServletRequest request,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @SuppressWarnings(&quot;NullableProblems&quot;) HttpServletResponse response,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      FilterChain filterChain)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CsrfToken csrfToken = (CsrfToken) request.getAttribute(&quot;_csrf&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Render the token value to a cookie by causing the deferred token to be loaded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    csrfToken.getToken();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filterChain.doFilter(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Lastly, create <code>SpaCsrfTokenRequestHandler.java</code> in the security folder and copy the following content into it:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo.security;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import jakarta.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import jakarta.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.function.Supplier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.csrf.CsrfToken;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.csrf.CsrfTokenRequestAttributeHandler;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.csrf.CsrfTokenRequestHandler;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.security.web.csrf.XorCsrfTokenRequestAttributeHandler;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.util.StringUtils;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">final class SpaCsrfTokenRequestHandler extends CsrfTokenRequestAttributeHandler {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final CsrfTokenRequestHandler delegate = new XorCsrfTokenRequestAttributeHandler();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void handle(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpServletRequest request, HttpServletResponse response, Supplier&lt;CsrfToken&gt; csrfToken) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Always use XorCsrfTokenRequestAttributeHandler to provide BREACH protection of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * the CsrfToken when it is rendered in the response body.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.delegate.handle(request, response, csrfToken);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String resolveCsrfTokenValue(HttpServletRequest request, CsrfToken csrfToken) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * If the request contains a request header, use CsrfTokenRequestAttributeHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * to resolve the CsrfToken. This applies when a single-page application includes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * the header value automatically, which was obtained via a cookie containing the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * raw CsrfToken.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (StringUtils.hasText(request.getHeader(csrfToken.getHeaderName()))) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return super.resolveCsrfTokenValue(request, csrfToken);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * In all other cases (e.g. if the request contains a request parameter), use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * XorCsrfTokenRequestAttributeHandler to resolve the CsrfToken. This applies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * when a server-side rendered form includes the _csrf request parameter as a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * hidden input.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.delegate.resolveCsrfTokenValue(request, csrfToken);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-8-add-examplewebsecurityconfigjava">Step 8: Add ExampleWebSecurityConfig.java<a href="#step-8-add-examplewebsecurityconfigjava" class="hash-link" aria-label="Direct link to Step 8: Add ExampleWebSecurityConfig.java" title="Direct link to Step 8: Add ExampleWebSecurityConfig.java">​</a></h3>
<p>ExampleWebSecurityConfig specifies beans that are used for authorization by spring.
Create <code>ExampleWebSecurityConfig.java</code> in the <code>security</code> package and copy following content
there:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo.security;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.cors.CorsConfiguration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.cors.CorsConfigurationSource;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExampleWebSecurityConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public CorsConfigurationSource corsConfigurationSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CorsConfiguration config = new CorsConfiguration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.setAllowCredentials(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.addAllowedOriginPattern(&quot;*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.addAllowedHeader(&quot;*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.addAllowedMethod(&quot;*&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    source.registerCorsConfiguration(&quot;/**&quot;, config);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return source;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-9-add-users">Step 9: Add users<a href="#step-9-add-users" class="hash-link" aria-label="Direct link to Step 9: Add users" title="Direct link to Step 9: Add users">​</a></h3>
<p>In order for security to work, we need to define ldap users. Please download
the <code>example-users.ldif</code> file here:</p>
<div><a class="button button--secondary button--lg"><a class="button button--secondary button--lg" href="/kadai-doc/assets/files/example-users-59b3afc8ac24bc03947b63568201a681.zip" download="" target="_blank">Download example users </a></a></div>
<br>
<p>Please unzip the <code>example-users</code> file and put it into the <code>resources</code> folder.</p>
<p>Your project structure should now look like this:
<img decoding="async" loading="lazy" alt="project structure" src="/kadai-doc/assets/images/project-structure-security-9607aaae9482804b3fd2e9f797362df1.png" width="355" height="633" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-10-try-out-the-rest-api">Step 10: Try out the REST-API<a href="#step-10-try-out-the-rest-api" class="hash-link" aria-label="Direct link to Step 10: Try out the REST-API" title="Direct link to Step 10: Try out the REST-API">​</a></h3>
<p>First, restart the ExampleApplication. Try to make a request like in the previous step, for example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET http://localhost:8080/kadai/api/v1/tasks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should get the &quot;401 Unauthorized&quot; response.
Now, you can authorize yourself using basicAuth.
In <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a>, go to the &quot;Authorization&quot; tab.
There, select basicAuth and
type &quot;admin&quot; as user and &quot;admin&quot; as password.
Then, you can make the following request:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET http://localhost:8080/kadai/api/v1/tasks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It should return a list of Tasks in the response body. Here is a screenshot of the request and the
response in <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a>:</p>
<p><img decoding="async" loading="lazy" alt="example request" src="/kadai-doc/assets/images/request-security-ea37ce040aec51b3b2eaf6698888e0d0.png" width="1395" height="927" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-up-kadai-ui">Set up KADAI UI<a href="#set-up-kadai-ui" class="hash-link" aria-label="Direct link to Set up KADAI UI" title="Direct link to Set up KADAI UI">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-11-add-web-dependencies">Step 11: Add web dependencies<a href="#step-11-add-web-dependencies" class="hash-link" aria-label="Direct link to Step 11: Add web dependencies" title="Direct link to Step 11: Add web dependencies">​</a></h3>
<p>Add the following dependencies to your pom and reload maven:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;io.kadai&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;kadai-web&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;9.1.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-12-add-controllers">Step 12: Add controllers<a href="#step-12-add-controllers" class="hash-link" aria-label="Direct link to Step 12: Add controllers" title="Direct link to Step 12: Add controllers">​</a></h3>
<p>Add <code>controllers</code> package into the <code>com.example.demo</code> package (in
src/main/java/com/example/demo). This package will contain the controllers for different paths. Our
application needs the following three controllers:</p>
<ul>
<li>LoginController</li>
<li>ResourcesController</li>
<li>ViewController</li>
</ul>
<p>These will be added in the steps 12a, 12b and 12c.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-12a-add-logincontrollerjava">Step 12a: Add <code>LoginController.java</code><a href="#step-12a-add-logincontrollerjava" class="hash-link" aria-label="Direct link to step-12a-add-logincontrollerjava" title="Direct link to step-12a-add-logincontrollerjava">​</a></h4>
<p>The LoginController will handle the login into kadai. It will need the <code>templates/login.html</code>
in the <code>resources</code> folder. You can download the templates folder here:</p>
<div><a class="button button--secondary button--lg"><a class="button button--secondary button--lg" href="/kadai-doc/assets/files/templates-63e01163241f7b3e4c22ff63263214df.zip" download="" target="_blank">Download templates </a></a></div>
<p>Please unzip the <code>templates</code> folder and put it into the <code>resources</code> folder. Then, copy
following code into <code>LoginController.java</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo.controllers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.core.Ordered;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.stereotype.Controller;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginController implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addViewControllers(ViewControllerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addViewController(&quot;/login&quot;).setViewName(&quot;login&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.setOrder(Ordered.HIGHEST_PRECEDENCE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-12b-add-resourcescontrollerjava">Step 12b: Add ResourcesController.java<a href="#step-12b-add-resourcescontrollerjava" class="hash-link" aria-label="Direct link to Step 12b: Add ResourcesController.java" title="Direct link to Step 12b: Add ResourcesController.java">​</a></h4>
<p>The ResourcesController handles resources like images and additional customizations. You&#x27;ll need
the <code>static</code> folder for it. You can download the <code>static</code> folder here:</p>
<div><a class="button button--secondary button--lg"><a class="button button--secondary button--lg" href="/kadai-doc/assets/files/static-b5a210389c4f7556535cbd797a333654.zip" download="" target="_blank">Download static </a></a></div>
<br>
<p>Please unzip the <code>static</code> folder and copy it into <code>resources</code>.
Additionally, there is
the <code>com.example.demo.controllers</code> folder for further customizations.
Please download it here:</p>
<div><a class="button button--secondary button--lg"><a class="button button--secondary button--lg" href="/kadai-doc/assets/files/com-0f07a8bf0277901135aeeda167b5a7ce.zip" download="" target="_blank">Download controllers </a></a></div>
<br>
<p>Unzip the <code>com</code> folder and put it into <code>resources</code>.
Then, please copy the following code
into <code>ResourcesController.java</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo.controllers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.http.MediaType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.http.ResponseEntity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.stereotype.Controller;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.bind.annotation.GetMapping;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.kadai.common.internal.util.ResourceUtil;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ResourcesController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String KADAI_CUSTOMIZATION_FILE_NAME = &quot;kadai-customization.json&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            value = &quot;/environments/data-sources/kadai-customization.json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            produces = MediaType.APPLICATION_JSON_VALUE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;String&gt; kadaiCustomization() throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.ok(readResourceAsString(KADAI_CUSTOMIZATION_FILE_NAME));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the environment-information.json file will be served via &quot;static&quot; folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //  @GetMapping(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //      value = &quot;/environments/data-sources/environment-information.json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //      produces = MediaType.APPLICATION_JSON_VALUE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //  public ResponseEntity&lt;String&gt; environmentInformation() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //    return ResponseEntity.ok(readResourceAsString(&quot;environment-information.json&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String readResourceAsString(String resource) throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String resourceAsString = ResourceUtil.readResourceAsString(getClass(), resource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (resourceAsString == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &quot;{}&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return resourceAsString;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-12c-add-viewcontrollerjava">Step 12c: Add ViewController.java<a href="#step-12c-add-viewcontrollerjava" class="hash-link" aria-label="Direct link to Step 12c: Add ViewController.java" title="Direct link to Step 12c: Add ViewController.java">​</a></h4>
<p>The ViewController manages the root view of KADAI.
Copy following code
into <code>ViewController.java</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo.controllers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.stereotype.Controller;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.bind.annotation.GetMapping;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** The view controller. */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ViewController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(path = {&quot;&quot;, &quot;kadai/**&quot;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String index() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;forward:/index.html&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-13-add-webmvcconfigjava">Step 13: Add WebMvcConfig.java<a href="#step-13-add-webmvcconfigjava" class="hash-link" aria-label="Direct link to Step 13: Add WebMvcConfig.java" title="Direct link to Step 13: Add WebMvcConfig.java">​</a></h3>
<p>Create <code>WebMvcConfig.java</code> in the <code>com.example.demo</code> package. It handles resources and
messages of the application. Copy following content into <code>WebMvcConfig.java</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.demo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.fasterxml.jackson.databind.ObjectMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.fasterxml.jackson.databind.SerializationFeature;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.http.converter.HttpMessageConverter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import jakarta.annotation.PostConstruct;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * The Web MVC Configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableWebMvc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebMvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final String[] CLASSPATH_RESOURCE_LOCATIONS = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;, &quot;classpath:/templates/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ObjectMapper objectMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public WebMvcConfig(ObjectMapper objectMapper) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.objectMapper = objectMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addResourceHandlers(ResourceHandlerRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addResourceHandler(&quot;/webjars/**&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!registry.hasMappingForPattern(&quot;/**&quot;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            registry.addResourceHandler(&quot;/**&quot;).addResourceLocations(CLASSPATH_RESOURCE_LOCATIONS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (HttpMessageConverter&lt;?&gt; converter : converters) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (converter instanceof MappingJackson2HttpMessageConverter) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                MappingJackson2HttpMessageConverter jacksonConverter =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        (MappingJackson2HttpMessageConverter) converter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                jacksonConverter.setPrettyPrint(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostConstruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void enableObjectIndent() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objectMapper.enable(SerializationFeature.INDENT_OUTPUT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Your project structure should look like this:</p>
<p><img decoding="async" loading="lazy" alt="project structure" src="/kadai-doc/assets/images/project-structure-end-a0f0c7c318c8d3e2810f1bb7b165f5f3.png" width="351" height="842" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-14-start-and-open-the-application">Step 14: Start and open the application<a href="#step-14-start-and-open-the-application" class="hash-link" aria-label="Direct link to Step 14: Start and open the application" title="Direct link to Step 14: Start and open the application">​</a></h3>
<p>Recompile the application, then go to the DemoApplication class in the IDE and start it. Then
type <code>localhost:8080/kadai</code> into your browser. You should see the login screen:</p>
<p><img decoding="async" loading="lazy" alt="Log in" src="/kadai-doc/assets/images/login-a309f62aa082a31bb0992528c1f5ff6b.png" width="4112" height="2418" class="img_ev3q"></p>
<p>Log in using &quot;admin&quot; as username and &quot;admin&quot; as password. Now, you should see the following:</p>
<p><img decoding="async" loading="lazy" alt="Workbaskets" src="/kadai-doc/assets/images/workbaskets-14c24952a7ee8d30d54b9a543020927c.png" width="4112" height="2416" class="img_ev3q"></p>
<p>Press the menu button in the upper left to navigate.</p>
<p><img decoding="async" loading="lazy" alt="Navigate" src="/kadai-doc/assets/images/navigate-04b25efdaf87f5bb1d0b5b318b90fb64.png" width="4112" height="2414" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kadai-doc/docs/category/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Started</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kadai-doc/docs/user-guide/getting-started/supportedEnvironments"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Supported Environments</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-youll-need" class="table-of-contents__link toc-highlight">What you&#39;ll need</a></li><li><a href="#set-up-kadai-rest-api-without-security" class="table-of-contents__link toc-highlight">Set up KADAI REST-API without security</a><ul><li><a href="#step-1-initialize-an-empty-project" class="table-of-contents__link toc-highlight">Step 1: Initialize an empty project</a></li><li><a href="#step-2-add-dependencies" class="table-of-contents__link toc-highlight">Step 2: Add dependencies</a></li><li><a href="#step-3-add-properties-configuration" class="table-of-contents__link toc-highlight">Step 3: Add properties configuration</a></li><li><a href="#step-4-add-rest-configuration" class="table-of-contents__link toc-highlight">Step 4: Add rest configuration</a></li><li><a href="#step-5-try-out-the-rest-api" class="table-of-contents__link toc-highlight">Step 5: Try out the REST-API</a></li></ul></li><li><a href="#set-up-kadai-security" class="table-of-contents__link toc-highlight">Set up KADAI Security</a><ul><li><a href="#step-6-add-security-dependencies-and-stop-disabling-security" class="table-of-contents__link toc-highlight">Step 6: Add security dependencies and stop disabling security</a></li><li><a href="#step-7-add-bootwebsecurityconfigurerjava" class="table-of-contents__link toc-highlight">Step 7: Add BootWebSecurityConfigurer.java</a></li><li><a href="#step-8-add-examplewebsecurityconfigjava" class="table-of-contents__link toc-highlight">Step 8: Add ExampleWebSecurityConfig.java</a></li><li><a href="#step-9-add-users" class="table-of-contents__link toc-highlight">Step 9: Add users</a></li><li><a href="#step-10-try-out-the-rest-api" class="table-of-contents__link toc-highlight">Step 10: Try out the REST-API</a></li></ul></li><li><a href="#set-up-kadai-ui" class="table-of-contents__link toc-highlight">Set up KADAI UI</a><ul><li><a href="#step-11-add-web-dependencies" class="table-of-contents__link toc-highlight">Step 11: Add web dependencies</a></li><li><a href="#step-12-add-controllers" class="table-of-contents__link toc-highlight">Step 12: Add controllers</a></li><li><a href="#step-13-add-webmvcconfigjava" class="table-of-contents__link toc-highlight">Step 13: Add WebMvcConfig.java</a></li><li><a href="#step-14-start-and-open-the-application" class="table-of-contents__link toc-highlight">Step 14: Start and open the application</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/kadai-doc/docs/contact-us/contactUs">Contact Us</a></li><li class="footer__item"><a href="https://github.com/kadai-io/kadai" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs:</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/kadai-doc/docs/user-guide/userGuideIntro">User Guide</a></li><li class="footer__item"><a href="https://kadai-io.azurewebsites.net/kadai/swagger-ui/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://kadai-io.azurewebsites.net/kadai/docs/java/kadai-core/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">KADAI core Java Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Demo App</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/kadai-doc/docs/demo-app/demoApp">Demo App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with Docusaurus. KADAI is a brand name registered by envite consulting GmbH</div></div></div></footer></div>
</body>
</html>